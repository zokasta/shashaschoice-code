(()=>{var e,t={836:(e,t,r)=>{"use strict";const o=window.wp.element,n=window.wp.i18n,s=window.wp.blocks,c=JSON.parse('{"name":"cusrev/reviews-grid","description":"Display a grid with product and store reviews using a masonry layout."}'),a=window.wp.components,l=window.wp.serverSideRender;var i=r.n(l);const u=window.wp.compose;function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},m.apply(this,arguments)}var d=r(556),p=r.n(d);const g=window.wp.url,h=window.wp.apiFetch;var _=r.n(h);const w=window.lodash,b=({selected:e=[],search:t="",queryArgs:r={}})=>{const o=(({selected:e=[],search:t="",queryArgs:r={}})=>{const o={per_page:0,catalog_visibility:"any",search:t,orderby:"title",order:"asc"};return[(0,g.addQueryArgs)("/wc/store/v1/products",{...o,...r})]})({selected:e,search:t,queryArgs:r});return Promise.all(o.map((e=>_()({path:e})))).then((e=>(0,w.uniqBy)((0,w.flatten)(e),"id").map((e=>({...e,parent:0}))))).catch((e=>{throw e}))},v=({selected:e=[],search:t})=>{const r=(({selected:e=[],search:t})=>[(0,g.addQueryArgs)("wc/store/v1/products/tags",{per_page:0,orderby:"name",order:"asc",search:t})])({selected:e,search:t});return Promise.all(r.map((e=>_()({path:e})))).then((e=>(0,w.uniqBy)((0,w.flatten)(e),"id")))},f=({selected:e=[],search:t})=>{const r=(({selected:e=[],search:t})=>[(0,g.addQueryArgs)("wp/v2/cr_tag",{orderby:"name",order:"asc",search:t})])({selected:e,search:t});return Promise.all(r.map((e=>_()({path:e})))).then((e=>(0,w.uniqBy)((0,w.flatten)(e),"id")))},C=async e=>{if("function"==typeof e.json)try{const t=await e.json();return{message:t.message,type:t.type||"api"}}catch(e){return{message:e.message,type:"general"}}return{message:e.message,type:e.type||"general"}},y=(0,u.createHigherOrderComponent)((e=>class extends o.Component{constructor(){super(...arguments),this.state={error:null,loading:!1,categories:[]},this.loadCategories=this.loadCategories.bind(this)}componentDidMount(){this.loadCategories()}loadCategories(){this.setState({loading:!0}),_()({path:(0,g.addQueryArgs)("wc/store/v1/products/categories",{per_page:0})}).then((e=>{this.setState({categories:e,loading:!1,error:null})})).catch((async e=>{const t=await C(e);this.setState({categories:[],loading:!1,error:t})}))}render(){const{error:t,loading:r,categories:n}=this.state;return(0,o.createElement)(e,m({},this.props,{error:t,isLoading:r,categories:n}))}}),"withCategories");var E=r(485),S=r.n(E),k=r(31);function x(e,t=e){const r=(0,w.groupBy)(e,"parent"),o=(0,w.keyBy)(t,"id"),n=(e={})=>e.parent?[...n(o[e.parent]),e.name]:e.name?[e.name]:[],s=e=>e.map((e=>{const t=r[e.id];return delete r[e.id],{...e,breadcrumbs:n(o[e.parent]),children:t&&t.length?s(t):[]}})),c=s(r[0]||[]);return delete r[0],(0,w.forEach)(r,(e=>{c.push(...s(e||[]))})),c}const N=({countLabel:e,className:t,depth:r=0,controlId:n="",item:s,isSelected:c,isSingle:a,onSelect:l,search:i="",...u})=>{const d=!(0,w.isNil)(e)||!(0,w.isNil)(s.count),p=[t,"cr-search-list__item"];p.push(`depth-${r}`),a&&p.push("is-radio-button"),d&&p.push("has-count");const g=s.breadcrumbs&&s.breadcrumbs.length,h=u.name||`search-list-item-${n}`,_=`${h}-${s.id}`;return(0,o.createElement)("label",{htmlFor:_,className:p.join(" ")},a?(0,o.createElement)("input",m({type:"radio",id:_,name:h,value:s.value,onChange:l(s),checked:c,className:"cr-search-list__item-input"},u)):(0,o.createElement)("input",m({type:"checkbox",id:_,name:h,value:s.value,onChange:l(s),checked:c,className:"cr-search-list__item-input"},u)),(0,o.createElement)("span",{className:"cr-search-list__item-label"},g?(0,o.createElement)("span",{className:"cr-search-list__item-prefix"},1===(b=s.breadcrumbs).length?(0,w.first)(b):2===b.length?(0,w.first)(b)+" › "+(0,w.last)(b):(0,w.first)(b)+" … "+(0,w.last)(b)):null,(0,o.createElement)("span",{className:"cr-search-list__item-name"},function(e,t){if(!t)return e;const r=new RegExp((0,w.escapeRegExp)(t),"ig");return e.split(r).map(((e,r)=>0===r?e:(0,o.createElement)(o.Fragment,{key:r},(0,o.createElement)("strong",null,t),e)))}(s.name,i))),!!d&&(0,o.createElement)("span",{className:"cr-search-list__item-count"},e||s.count));var b};N.propTypes={className:p().string,countLabel:p().node,controlId:p().node,depth:p().number,item:p().object,name:p().string,isSelected:p().bool,isSingle:p().bool,onSelect:p().func,search:p().string};const O=N,R=function(e){let{icon:t,size:r=24,...n}=e;return(0,o.cloneElement)(t,{width:r,height:r,...n})},B=window.wp.primitives,I=(0,o.createElement)(B.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(B.Path,{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM15.5303 8.46967C15.8232 8.76256 15.8232 9.23744 15.5303 9.53033L13.0607 12L15.5303 14.4697C15.8232 14.7626 15.8232 15.2374 15.5303 15.5303C15.2374 15.8232 14.7626 15.8232 14.4697 15.5303L12 13.0607L9.53033 15.5303C9.23744 15.8232 8.76256 15.8232 8.46967 15.5303C8.17678 15.2374 8.17678 14.7626 8.46967 14.4697L10.9393 12L8.46967 9.53033C8.17678 9.23744 8.17678 8.76256 8.46967 8.46967C8.76256 8.17678 9.23744 8.17678 9.53033 8.46967L12 10.9393L14.4697 8.46967C14.7626 8.17678 15.2374 8.17678 15.5303 8.46967Z"})),P=window.wp.htmlEntities,A=({id:e,instanceId:t,label:r,popoverContents:s,remove:c,screenReaderLabel:l,className:i})=>{const[u,m]=(0,o.useState)(!1);if(l=l||r,!r)return null;r=(0,P.decodeEntities)(r);const d=S()("cr-tag-a",i,{"has-remove":!!c}),p=`cr-tag__label-${t}`,g=(0,o.createElement)(o.Fragment,null,(0,o.createElement)("span",{className:"screen-reader-text"},l),(0,o.createElement)("span",{"aria-hidden":"true"},r));return(0,o.createElement)("span",{className:d},s?(0,o.createElement)(a.Button,{className:"cr-tag__text",id:p,onClick:()=>m(!0)},g):(0,o.createElement)("span",{className:"cr-tag__text",id:p},g),s&&u&&(0,o.createElement)(a.Popover,{onClose:()=>m(!1)},s),c&&(0,o.createElement)(a.Button,{className:"cr-tag__remove",onClick:c(e),label:(0,n.sprintf)((0,n.__)("Remove %s","customer-reviews-woocommerce"),r),"aria-describedby":p},(0,o.createElement)(R,{icon:I,size:20,className:"clear-icon"})))};A.propTypes={id:p().oneOfType([p().number,p().string]),label:p().string.isRequired,popoverContents:p().node,remove:p().func,screenReaderLabel:p().string};const T=(0,u.withInstanceId)(A),L={clear:(0,n.__)("Clear all selected items","customer-reviews-woocommerce"),noItems:(0,n.__)("No items found.","customer-reviews-woocommerce"),noResults:(0,n.__)("No results for %s","customer-reviews-woocommerce"),search:(0,n.__)("Search for items","customer-reviews-woocommerce"),selected:e=>(0,n.sprintf)(/* translators: Number of items selected from list. */ /* translators: Number of items selected from list. */
(0,n._n)("%d item selected","%d items selected",e,"customer-reviews-woocommerce"),e),updated:(0,n.__)("Search results updated.","customer-reviews-woocommerce")},M=e=>{const[t,r]=(0,o.useState)(e.search||""),{isSingle:s,isLoading:c,onChange:l,selected:i,instanceId:u,messages:m,isCompact:d,debouncedSpeak:p,onSearch:g,className:h=""}=e,_={...L,...m};(0,o.useEffect)((()=>{"function"==typeof g&&g(t)}),[g,t]);const b=e=>()=>{s&&l([]);const t=(0,w.findIndex)(i,{id:e});l([...i.slice(0,t),...i.slice(t+1)])},v=e=>()=>{f(e)?b(e.id)():l(s?[e]:[...i,e])},f=e=>-1!==(0,w.findIndex)(i,{id:e.id}),C=e=>(0,o.createElement)(O,e),y=(r,n=0)=>{const c=e.renderItem||C;return r?r.map((e=>(0,o.createElement)(o.Fragment,{key:e.id},(0,o.createElement)("li",null,c({item:e,isSelected:f(e),onSelect:v,isSingle:s,search:t,depth:n,controlId:u})),y(e.children,n+1)))):null};return(0,o.createElement)("div",{className:S()("cr-search-list",h,{"is-compact":d})},(()=>{if(c||s||!i)return null;const e=i.length;return(0,o.createElement)("div",{className:"cr-search-list__selected"},(0,o.createElement)("div",{className:"cr-search-list__selected-header"},(0,o.createElement)("strong",null,_.selected(e)),e>0?(0,o.createElement)(a.Button,{isLink:!0,isDestructive:!0,onClick:()=>{l([])},"aria-label":_.clear},(0,n.__)("Clear all","customer-reviews-woocommerce")):null),e>0?(0,o.createElement)("ul",null,i.map(((e,t)=>(0,o.createElement)("li",{key:t},(0,o.createElement)(T,{label:e.name,id:e.id,remove:b}))))):null)})(),(0,o.createElement)("div",{className:"cr-search-list__search"},(0,o.createElement)(a.TextControl,{label:_.search,type:"search",value:t,onChange:e=>r(e)})),(()=>{if(c)return(0,o.createElement)("div",{className:"cr-search-list__list is-loading"},(0,o.createElement)(a.Spinner,null));const r=((t,r)=>{const{isHierarchical:o}=e;if(!r)return o?x(t):t;const n=new RegExp((0,w.escapeRegExp)(r),"i");p(_.updated);const s=t.map((e=>!!n.test(e.name)&&e)).filter(Boolean);return o?x(s,t):s})(e.list,t);return r.length?(0,o.createElement)("ul",{className:"cr-search-list__list"},y(r)):(0,o.createElement)("div",{className:"cr-search-list__list is-not-found"},(0,o.createElement)("span",{className:"cr-search-list__not-found-icon"},(0,o.createElement)(k.A,{role:"img","aria-hidden":"true",focusable:"false"})),(0,o.createElement)("span",{className:"cr-search-list__not-found-text"},t?(0,n.sprintf)(_.noResults,t):_.noItems))})())};M.propTypes={className:p().string,isCompact:p().bool,isHierarchical:p().bool,isLoading:p().bool,isSingle:p().bool,list:p().arrayOf(p().shape({id:p().number,name:p().string})),messages:p().shape({clear:p().string,noItems:p().string,noResults:p().string,search:p().string,selected:p().func,updated:p().string}),onChange:p().func.isRequired,onSearch:p().func,renderItem:p().func,selected:p().array.isRequired,debouncedSpeak:p().func,instanceId:p().number};const $=(0,u.compose)([a.withSpokenMessages,u.withInstanceId])(M),D=({categories:e,error:t,isLoading:r,onChange:s,onOperatorChange:c,operator:l,selected:i,isCompact:u,isSingle:d,showReviewCount:p})=>{const g={clear:(0,n.__)("Clear all product categories","woo-gutenberg-products-block"),list:(0,n.__)("Product Categories","woo-gutenberg-products-block"),noItems:(0,n.__)("Your store doesn't have any product categories.","woo-gutenberg-products-block"),search:(0,n.__)("Search for product categories","woo-gutenberg-products-block"),selected:e=>(0,n.sprintf)(/* translators: %d is the count of selected categories. */ /* translators: %d is the count of selected categories. */
(0,n._n)("%d category selected","%d categories selected",e,"woo-gutenberg-products-block"),e),updated:(0,n.__)("Category search results updated.","woo-gutenberg-products-block")};return t?(0,o.createElement)("div",{className:"wc-block-error-message"},t):(0,o.createElement)(o.Fragment,null,(0,o.createElement)($,{className:"woocommerce-product-categories2",list:e,isLoading:r,selected:i.map((t=>e.find((e=>e.id===t)))).filter(Boolean),onChange:s,renderItem:e=>{const{item:t,search:r,depth:s=0}=e,c=t.breadcrumbs.length?`${t.breadcrumbs.join(", ")}, ${t.name}`:t.name,a=p?(0,n.sprintf)(/* translators: %1$s is the item name, %2$d is the count of reviews for the item. */ /* translators: %1$s is the item name, %2$d is the count of reviews for the item. */
(0,n._n)("%1$s, has %2$d review","%1$s, has %2$d reviews",t.review_count,"woo-gutenberg-products-block"),c,t.review_count):(0,n.sprintf)(/* translators: %1$s is the item name, %2$d is the count of products for the item. */ /* translators: %1$s is the item name, %2$d is the count of products for the item. */
(0,n._n)("%1$s, has %2$d product","%1$s, has %2$d products",t.count,"woo-gutenberg-products-block"),c,t.count),l=p?(0,n.sprintf)(/* translators: %d is the count of reviews. */ /* translators: %d is the count of reviews. */
(0,n._n)("%d review","%d reviews",t.review_count,"woo-gutenberg-products-block"),t.review_count):(0,n.sprintf)(/* translators: %d is the count of products. */ /* translators: %d is the count of products. */
(0,n._n)("%d product","%d products",t.count,"woo-gutenberg-products-block"),t.count);return(0,o.createElement)(O,m({className:S()("woocommerce-product-categories__item","has-count",{"is-searching":r.length>0,"is-skip-level":0===s&&0!==t.parent})},e,{countLabel:l,"aria-label":a}))},messages:g,isCompact:u,isHierarchical:!0,isSingle:d}),!!c&&(0,o.createElement)("div",{hidden:i.length<2},(0,o.createElement)(a.SelectControl,{className:"woocommerce-product-categories__operator",label:(0,n.__)("Display products matching","woo-gutenberg-products-block"),help:(0,n.__)("Pick at least two categories to use this setting.","woo-gutenberg-products-block"),value:l,onChange:c,options:[{label:(0,n.__)("Any selected categories","woo-gutenberg-products-block"),value:"any"},{label:(0,n.__)("All selected categories","woo-gutenberg-products-block"),value:"all"}]})))};D.propTypes={onChange:p().func.isRequired,onOperatorChange:p().func,operator:p().oneOf(["all","any"]),selected:p().array.isRequired,isCompact:p().bool,isSingle:p().bool},D.defaultProps={operator:"any",isCompact:!1,isSingle:!1};const j=y(D);var H=r(609);const q=window.wp.escapeHtml,z=({error:e})=>(0,o.createElement)("div",{className:"wc-block-error-message"},(({message:e,type:t})=>e?"general"===t?(0,o.createElement)("span",null,(0,n.__)("The following error was returned","woo-gutenberg-products-block"),(0,o.createElement)("br",null),(0,o.createElement)("code",null,(0,q.escapeHTML)(e))):"api"===t?(0,o.createElement)("span",null,(0,n.__)("The following error was returned from the API","woo-gutenberg-products-block"),(0,o.createElement)("br",null),(0,o.createElement)("code",null,(0,q.escapeHTML)(e))):e:(0,n.__)("An unknown error occurred which prevented the block from being updated.","woo-gutenberg-products-block"))(e)),F=({error:e,onChange:t,onSearch:r,selected:s,products:c,isLoading:a,isCompact:l})=>{const i={clear:(0,n.__)("Clear all products","woo-gutenberg-products-block"),list:(0,n.__)("Products","woo-gutenberg-products-block"),noItems:(0,n.__)("Your store doesn't have any products.","woo-gutenberg-products-block"),search:(0,n.__)("Search for products to display","woo-gutenberg-products-block"),selected:e=>(0,n.sprintf)(/* translators: %d is the number of selected products. */ /* translators: %d is the number of selected products. */
(0,n._n)("%d product selected","%d products selected",e,"woo-gutenberg-products-block"),e),updated:(0,n.__)("Product search results updated.","woo-gutenberg-products-block")};return e?(0,o.createElement)(z,{error:e}):(0,o.createElement)($,{className:"woocommerce-products",list:c.map((e=>{const t=e.sku?" ("+e.sku+")":"";return{...e,name:`${e.name}${t}`}})),isCompact:l,isLoading:a,selected:c.filter((({id:e})=>s.includes(e))),onSearch:r,onChange:t,messages:i})};F.propTypes={onChange:p().func.isRequired,onSearch:p().func,selected:p().array,products:p().array,isCompact:p().bool,isLoading:p().bool},F.defaultProps={selected:[],products:[],isCompact:!1,isLoading:!0};const W=(Y=F,({selected:e,...t})=>{const[r,n]=(0,o.useState)(!0),[s,c]=(0,o.useState)(null),[a,l]=(0,o.useState)([]),i=async e=>{const t=await C(e);c(t),n(!1)},u=(0,o.useRef)(e);(0,o.useEffect)((()=>{b({selected:u.current}).then((e=>{l(e),n(!1)})).catch(i)}),[u]);const d=function(e,t,r){var o=this,n=(0,H.useRef)(null),s=(0,H.useRef)(0),c=(0,H.useRef)(null),a=(0,H.useRef)([]),l=(0,H.useRef)(),i=(0,H.useRef)(),u=(0,H.useRef)(e),m=(0,H.useRef)(!0);(0,H.useEffect)((function(){u.current=e}),[e]);var d=!t&&0!==t&&"undefined"!=typeof window;if("function"!=typeof e)throw new TypeError("Expected a function");t=+t||0;var p=!!(r=r||{}).leading,g=!("trailing"in r)||!!r.trailing,h="maxWait"in r,_=h?Math.max(+r.maxWait||0,t):null;(0,H.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]);var w=(0,H.useMemo)((function(){var e=function(e){var t=a.current,r=l.current;return a.current=l.current=null,s.current=e,i.current=u.current.apply(r,t)},r=function(e,t){d&&cancelAnimationFrame(c.current),c.current=d?requestAnimationFrame(e):setTimeout(e,t)},w=function(e){if(!m.current)return!1;var r=e-n.current;return!n.current||r>=t||r<0||h&&e-s.current>=_},b=function(t){return c.current=null,g&&a.current?e(t):(a.current=l.current=null,i.current)},v=function e(){var o=Date.now();if(w(o))return b(o);if(m.current){var c=t-(o-n.current),a=h?Math.min(c,_-(o-s.current)):c;r(e,a)}},f=function(){var u=Date.now(),d=w(u);if(a.current=[].slice.call(arguments),l.current=o,n.current=u,d){if(!c.current&&m.current)return s.current=n.current,r(v,t),p?e(n.current):i.current;if(h)return r(v,t),e(n.current)}return c.current||r(v,t),i.current};return f.cancel=function(){c.current&&(d?cancelAnimationFrame(c.current):clearTimeout(c.current)),s.current=0,a.current=n.current=l.current=c.current=null},f.isPending=function(){return!!c.current},f.flush=function(){return c.current?b(Date.now()):i.current},f}),[p,h,t,_,g,d]);return w}((t=>{b({selected:e,search:t}).then((e=>{l(e),n(!1)})).catch(i)}),400),p=(0,o.useCallback)((e=>{n(!0),d(e)}),[n,d]);return(0,o.createElement)(Y,m({},t,{selected:e,error:s,products:a,isLoading:r,onSearch:p}))});var Y;class G extends o.Component{constructor(){super(...arguments),this.state={list:[],loading:!0},this.renderItem=this.renderItem.bind(this),this.debouncedOnSearch=(0,w.debounce)(this.onSearch.bind(this),400)}componentDidMount(){const{selected:e}=this.props;v({selected:e}).then((e=>{this.setState({list:e,loading:!1})})).catch((()=>{this.setState({list:[],loading:!1})}))}onSearch(e){const{selected:t}=this.props;this.setState({loading:!0}),v({selected:t,search:e}).then((e=>{this.setState({list:e,loading:!1})})).catch((()=>{this.setState({list:[],loading:!1})}))}renderItem(e){const{item:t,search:r,depth:s=0}=e,c=t.breadcrumbs.length?`${t.breadcrumbs.join(", ")}, ${t.name}`:t.name;return(0,o.createElement)(O,m({className:S()("woocommerce-product-tags__item","has-count",{"is-searching":r.length>0,"is-skip-level":0===s&&0!==t.parent})},e,{"aria-label":(0,n.sprintf)(/* translators: %1$d is the count of products, %2$s is the name of the tag. */ /* translators: %1$d is the count of products, %2$s is the name of the tag. */
(0,n._n)("%1$d product tagged as %2$s","%1$d products tagged as %2$s",t.count,"woo-gutenberg-products-block"),t.count,c)}))}render(){const{list:e,loading:t}=this.state,{isCompact:r,onChange:s,onOperatorChange:c,operator:l,selected:i}=this.props,u={clear:(0,n.__)("Clear all product tags","woo-gutenberg-products-block"),list:(0,n.__)("Product Tags","woo-gutenberg-products-block"),noItems:(0,n.__)("Your store doesn't have any product tags.","woo-gutenberg-products-block"),search:(0,n.__)("Search for product tags","woo-gutenberg-products-block"),selected:e=>(0,n.sprintf)(/* translators: %d is the count of selected tags. */ /* translators: %d is the count of selected tags. */
(0,n._n)("%d tag selected","%d tags selected",e,"woo-gutenberg-products-block"),e),updated:(0,n.__)("Tag search results updated.","woo-gutenberg-products-block")};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)($,{className:"woocommerce-product-tags",list:e,isLoading:t,selected:i.map((t=>e.find((e=>e.id===t)))).filter(Boolean),onChange:s,onSearch:this.debouncedOnSearch,renderItem:this.renderItem,messages:u,isCompact:r,isHierarchical:!0}),!!c&&(0,o.createElement)("div",{hidden:i.length<2},(0,o.createElement)(a.SelectControl,{className:"woocommerce-product-tags__operator",label:(0,n.__)("Display products matching","woo-gutenberg-products-block"),help:(0,n.__)("Pick at least two tags to use this setting.","woo-gutenberg-products-block"),value:l,onChange:c,options:[{label:(0,n.__)("Any selected tags","woo-gutenberg-products-block"),value:"any"},{label:(0,n.__)("All selected tags","woo-gutenberg-products-block"),value:"all"}]})))}}G.propTypes={onChange:p().func.isRequired,onOperatorChange:p().func,operator:p().oneOf(["all","any"]),selected:p().array.isRequired,isCompact:p().bool},G.defaultProps={isCompact:!1,operator:"any"};const Q=G;class U extends o.Component{constructor(){super(...arguments),this.state={list:[],loading:!0},this.renderItem=this.renderItem.bind(this),this.debouncedOnSearch=(0,w.debounce)(this.onSearch.bind(this),400)}componentDidMount(){const{selected:e}=this.props;f({selected:e}).then((e=>{this.setState({list:e,loading:!1})})).catch((()=>{this.setState({list:[],loading:!1})}))}onSearch(e){const{selected:t}=this.props;this.setState({loading:!0}),f({selected:t,search:e}).then((e=>{this.setState({list:e,loading:!1})})).catch((()=>{this.setState({list:[],loading:!1})}))}renderItem(e){const{item:t,search:r,depth:s=0}=e,c=t.breadcrumbs.length?`${t.breadcrumbs.join(", ")}, ${t.name}`:t.name;return(0,o.createElement)(O,m({className:S()("woocommerce-product-tags__item","has-count",{"is-searching":r.length>0,"is-skip-level":0===s&&0!==t.parent})},e,{"aria-label":(0,n.sprintf)(/* translators: %1$d is the count of products, %2$s is the name of the tag. */ /* translators: %1$d is the count of products, %2$s is the name of the tag. */
(0,n._n)("%1$d product tagged as %2$s","%1$d products tagged as %2$s",t.count,"woo-gutenberg-products-block"),t.count,c)}))}render(){const{list:e,loading:t}=this.state,{isCompact:r,onChange:s,onOperatorChange:c,operator:l,selected:i}=this.props,u={clear:(0,n.__)("Clear all tags","customer-reviews-woocommerce"),list:(0,n.__)("Tags","customer-reviews-woocommerce"),noItems:(0,n.__)("Your reviews don't have any tags","customer-reviews-woocommerce"),search:(0,n.__)("Search for tags","customer-reviews-woocommerce"),selected:e=>(0,n.sprintf)(/* translators: %d is the count of selected tags. */ /* translators: %d is the count of selected tags. */
(0,n._n)("%d tag selected","%d tags selected",e,"customer-reviews-woocommerce"),e),updated:(0,n.__)("Tag search results updated.","customer-reviews-woocommerce")};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)($,{className:"woocommerce-product-tags",list:e,isLoading:t,selected:i.map((t=>e.find((e=>e.id===t)))).filter(Boolean),onChange:s,onSearch:this.debouncedOnSearch,renderItem:this.renderItem,messages:u,isCompact:r,isHierarchical:!0}),!!c&&(0,o.createElement)("div",{hidden:i.length<2},(0,o.createElement)(a.SelectControl,{className:"woocommerce-product-tags__operator",label:(0,n.__)("Display reviews matching","customer-reviews-woocommerce"),help:(0,n.__)("Pick at least two tags to use this setting.","customer-reviews-woocommerce"),value:l,onChange:c,options:[{label:(0,n.__)("Any selected tags","customer-reviews-woocommerce"),value:"any"},{label:(0,n.__)("All selected tags","customer-reviews-woocommerce"),value:"all"}]})))}}U.propTypes={onChange:p().func.isRequired,onOperatorChange:p().func,operator:p().oneOf(["all","any"]),selected:p().array.isRequired,isCompact:p().bool},U.defaultProps={isCompact:!1,operator:"any"};const V=U,Z=e=>(0,o.createElement)(a.BaseControl,{id:e.instanceId||Math.random(),label:e.label||""},(0,o.createElement)(a.ColorPicker,{color:e.color,label:e.label,disableAlpha:e.disableAlpha,onChangeComplete:e.onChange})),J=window.wp.blockEditor,{name:K}=c;function X({attributes:e,setAttributes:t}){const r=(0,u.useRefEffect)((e=>{let t=setInterval((function(){if(e.getElementsByClassName("cr-reviews-grid-inner cr-colcade-loaded").length)clearInterval(t);else{let t=e.getElementsByClassName("cr-reviews-grid-inner");t.length&&"function"==typeof crResizeAllGridItemsUtil&&crResizeAllGridItemsUtil(t)}}),3e3);return()=>clearInterval(t)}),[e]);return(0,o.createElement)("div",(0,J.useBlockProps)({ref:r}),(0,o.createElement)(J.InspectorControls,{key:"setting"},(0,o.createElement)(a.PanelBody,{title:(0,n.__)("Review Grid Settings","customer-reviews-woocommerce"),initialOpen:!0},(0,o.createElement)(a.RangeControl,{label:(0,n.__)("Number of Reviews","customer-reviews-woocommerce"),value:e.count,min:1,max:6,onChange:e=>t({count:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,o.createElement)(a.RangeControl,{label:(0,n.__)("Number of Shop Reviews","customer-reviews-woocommerce"),value:e.count_shop_reviews,min:0,max:3,onChange:e=>t({count_shop_reviews:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,o.createElement)(a.RangeControl,{label:(0,n.__)("Show More","customer-reviews-woocommerce"),value:e.show_more,min:0,max:10,onChange:e=>t({show_more:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,o.createElement)(a.RangeControl,{label:(0,n.__)("Minimum Number of Characters in a Review (0 = Display All Reviews)","customer-reviews-woocommerce"),value:e.min_chars,min:0,max:9999,onChange:e=>t({min_chars:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,o.createElement)(a.ToggleControl,{label:(0,n.__)("Show Products","customer-reviews-woocommerce"),checked:e.show_products,onChange:()=>t({show_products:!e.show_products}),__nextHasNoMarginBottom:!0}),(0,o.createElement)(a.ToggleControl,{label:(0,n.__)("Product Links","customer-reviews-woocommerce"),checked:e.product_links,onChange:()=>t({product_links:!e.product_links}),__nextHasNoMarginBottom:!0}),(0,o.createElement)(a.ToggleControl,{label:(0,n.__)("Shop Reviews","customer-reviews-woocommerce"),checked:e.shop_reviews,onChange:()=>t({shop_reviews:!e.shop_reviews}),__nextHasNoMarginBottom:!0}),(0,o.createElement)(a.ToggleControl,{label:(0,n.__)("Inactive Products","customer-reviews-woocommerce"),checked:e.inactive_products,onChange:()=>t({inactive_products:!e.inactive_products}),__nextHasNoMarginBottom:!0}),(0,o.createElement)(a.ToggleControl,{label:(0,n.__)("Show Rating Bars","customer-reviews-woocommerce"),checked:e.show_summary_bar,onChange:()=>t({show_summary_bar:!e.show_summary_bar}),__nextHasNoMarginBottom:!0}),(0,o.createElement)(a.ToggleControl,{label:(0,n.__)("Add Review","customer-reviews-woocommerce"),checked:e.add_review,onChange:()=>t({add_review:!e.add_review}),__nextHasNoMarginBottom:!0}),(0,o.createElement)(a.SelectControl,{label:(0,n.__)("Avatars","customer-reviews-woocommerce"),value:e.avatars,options:[{label:(0,n.__)("Initials","customer-reviews-woocommerce"),value:"initials"},{label:(0,n.__)("Standard","customer-reviews-woocommerce"),value:"standard"},{label:(0,n.__)("No avatars","customer-reviews-woocommerce"),value:"false"}],onChange:e=>t({avatars:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,o.createElement)(a.SelectControl,{label:(0,n.__)("Sort By","customer-reviews-woocommerce"),value:e.sort_by,options:[{label:(0,n.__)("Date","customer-reviews-woocommerce"),value:"date"},{label:(0,n.__)("Rating","customer-reviews-woocommerce"),value:"rating"},{label:(0,n.__)("Media","customer-reviews-woocommerce"),value:"media"}],onChange:e=>t({sort_by:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,o.createElement)(a.SelectControl,{label:(0,n.__)("Sort Order","customer-reviews-woocommerce"),value:e.sort,options:[{label:(0,n.__)("Ascending","customer-reviews-woocommerce"),value:"ASC"},{label:(0,n.__)("Descending","customer-reviews-woocommerce"),value:"DESC"},{label:(0,n.__)("Random","customer-reviews-woocommerce"),value:"RAND"}],onChange:e=>t({sort:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),(0,o.createElement)(a.PanelBody,{title:(0,n.__)("Product Categories","customer-reviews-woocommerce"),initialOpen:!1},(0,o.createElement)("div",null,(0,n.__)("Select which product categories to show reviews for.","customer-reviews-woocommerce")),(0,o.createElement)(j,{selected:e.categories,onChange:(e=[])=>{const r=e.map((({id:e})=>e));t({categories:r})},isCompact:!0})),(0,o.createElement)(a.PanelBody,{title:(0,n.__)("Products","customer-reviews-woocommerce"),initialOpen:!1},(0,o.createElement)("div",null,(0,n.__)("Select which products to show reviews for.","customer-reviews-woocommerce")),(0,o.createElement)(W,{selected:e.products,onChange:(e=[])=>{const r=e.map((({id:e})=>e));t({products:r})}})),(0,o.createElement)(a.PanelBody,{title:(0,n.__)("Product Tags","customer-reviews-woocommerce"),initialOpen:!1},(0,o.createElement)("div",null,(0,n.__)("Select which product tags to show reviews for.","customer-reviews-woocommerce")),(0,o.createElement)(Q,{selected:e.product_tags,onChange:(e=[])=>{const r=e.map((({id:e})=>e));t({product_tags:r})}})),(0,o.createElement)(a.PanelBody,{title:(0,n.__)("Tags","customer-reviews-woocommerce"),initialOpen:!1},(0,o.createElement)("div",null,(0,n.__)("Select which tags to show reviews for.","customer-reviews-woocommerce")),(0,o.createElement)(V,{selected:e.tag_ids,onChange:(e=[])=>{const r=e.map((({id:e})=>e));t({tag_ids:r})}})),(0,o.createElement)(a.PanelBody,{title:(0,n.__)("Colors","customer-reviews-woocommerce"),initialOpen:!1},(0,o.createElement)(Z,{color:e.color_ex_brdr,label:(0,n.__)("External Border","customer-reviews-woocommerce"),disableAlpha:!0,onChange:e=>{t({color_ex_brdr:e.hex})}}),(0,o.createElement)(Z,{color:e.color_brdr,label:(0,n.__)("Review Card Border","customer-reviews-woocommerce"),disableAlpha:!0,onChange:e=>{t({color_brdr:e.hex})}}),(0,o.createElement)(Z,{color:e.color_ex_bcrd,label:(0,n.__)("Background","customer-reviews-woocommerce"),disableAlpha:!0,onChange:e=>{t({color_ex_bcrd:e.hex})}}),(0,o.createElement)(Z,{color:e.color_bcrd,label:(0,n.__)("Review Card Background","customer-reviews-woocommerce"),disableAlpha:!0,onChange:e=>{t({color_bcrd:e.hex})}}),(0,o.createElement)(Z,{color:e.color_pr_bcrd,label:(0,n.__)("Product Area Background","customer-reviews-woocommerce"),disableAlpha:!0,onChange:e=>{t({color_pr_bcrd:e.hex})}}),(0,o.createElement)(Z,{color:e.color_stars,label:(0,n.__)("Stars","customer-reviews-woocommerce"),disableAlpha:!0,onChange:e=>{t({color_stars:e.hex})}}))),(0,o.createElement)(a.Disabled,null,(0,o.createElement)(i(),{block:K,attributes:e})))}const{name:ee,description:te}=c;(0,s.registerBlockType)(ee,{description:(0,n.__)(te,"customer-reviews-woocommerce"),edit:e=>(0,o.createElement)(X,e),save:()=>null})},485:(e,t)=>{var r;!function(){"use strict";var o={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)){if(r.length){var c=n.apply(null,r);c&&e.push(c)}}else if("object"===s)if(r.toString===Object.prototype.toString)for(var a in r)o.call(r,a)&&r[a]&&e.push(a);else e.push(r.toString())}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)}()},31:(e,t,r)=>{"use strict";t.A=function(e){var t=e.size,r=void 0===t?24:t,o=e.onClick,a=(e.icon,e.className),l=function(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},s=Object.keys(e);for(o=0;o<s.length;o++)r=s[o],0<=t.indexOf(r)||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,s),i=["gridicon","gridicons-notice-outline",a,!!function(e){return 0==e%18}(r)&&"needs-offset",!1,!1].filter(Boolean).join(" ");return n.default.createElement("svg",c({className:i,height:r,width:r,onClick:o},l,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),n.default.createElement("g",null,n.default.createElement("path",{d:"M12 4c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8m0-2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 13h-2v2h2v-2zm-2-2h2l.5-6h-3l.5 6z"})))};var o,n=(o=r(609))&&o.__esModule?o:{default:o},s=["size","onClick","icon","className"];function c(){return c=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)}},694:(e,t,r)=>{"use strict";var o=r(925);function n(){}function s(){}s.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,s,c){if(c!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:n};return r.PropTypes=r,r}},556:(e,t,r)=>{e.exports=r(694)()},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},609:e=>{"use strict";e.exports=window.React}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,r,n,s)=>{if(!r){var c=1/0;for(u=0;u<e.length;u++){for(var[r,n,s]=e[u],a=!0,l=0;l<r.length;l++)(!1&s||c>=s)&&Object.keys(o.O).every((e=>o.O[e](r[l])))?r.splice(l--,1):(a=!1,s<c&&(c=s));if(a){e.splice(u--,1);var i=n();void 0!==i&&(t=i)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,n,s]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={342:0,434:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[c,a,l]=r,i=0;if(c.some((t=>0!==e[t]))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(l)var u=l(o)}for(t&&t(r);i<c.length;i++)s=c[i],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(u)},r=globalThis.webpackChunkcustomer_reviews_woocommerce=globalThis.webpackChunkcustomer_reviews_woocommerce||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=o.O(void 0,[434],(()=>o(836)));n=o.O(n)})();