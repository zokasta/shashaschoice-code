{"version":3,"file":"js/campaigns.fccd9c1d.js","mappings":"uNAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,YAAY,CAACE,YAAY,wBAAwB,CAACF,EAAG,KAAK,CAACE,YAAY,qBAAqB,CAACJ,EAAIK,GAAG,eAAeH,EAAG,cAAc,CAACE,YAAY,gBAAgBE,MAAM,CAAC,KAAO,SAASC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOR,EAAIS,OAAOC,KAAK,0BAA0B,IAAI,CAACV,EAAIK,GAAG,aAAaH,EAAG,gBAAgB,CAACI,MAAM,CAAC,OAASN,EAAIW,UAAUT,EAAG,aAAa,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,WAAW,CAAGN,EAAIY,WAAcZ,EAAIa,UAA0Cb,EAAIc,gBAAiBZ,EAAG,0BAA0BA,EAAG,MAAM,CAACa,YAAY,CAAC,SAAW,aAAa,CAACb,EAAG,0BAA0B,CAACI,MAAM,CAAC,UAAU,EAAIN,EAAIgB,KAAKC,OAAO,aAAajB,EAAIkB,WAAWX,GAAG,CAAC,UAAYP,EAAImB,aAAajB,EAAG,kBAAkB,CAACI,MAAM,CAAC,UAAYN,EAAIoB,gBAAgB,UAAU,EAAIpB,EAAIgB,KAAKC,OAAO,aAAajB,EAAIkB,UAAU,gBAAgBlB,EAAIqB,cAAgBrB,EAAIa,WAAWN,GAAG,CAAC,UAAYP,EAAImB,aAAcnB,EAAIa,UAAWX,EAAG,eAAe,CAACa,YAAY,CAAC,SAAW,WAAW,IAAM,QAAQ,QAAU,SAASf,EAAIsB,MAAM,GAA5jBpB,EAAG,4BAA6jB,GAAGA,EAAG,mCAAmC,EAC5lC,EACIqB,EAAkB,G,+BC4BtB,GAaAC,gBAAAA,CAAAA,EAAAA,EAAAA,GACA,iEAEA,sBAEAC,GACA,EACAC,cAAAA,EACAC,IAAAA,GACA,OACAT,UAAAA,OAEA,EACAU,SAAAA,KACA,yDACA,iDACA,wBACA,oEACAf,SAAAA,GACA,uEACA,EACAQ,YAAAA,GACA,yDACA,EACAD,eAAAA,GACA,sBACA,yBAEA,EACA,EACAS,YAAAA,GACA,iCACA,EACAf,eAAAA,GACA,sEACA,GAEAgB,MAAAA,CACAC,MAAAA,CAAAA,GACA,uBAEA,uCACA,GAEAC,OAAAA,GACA,kBACAC,KAAAA,KAAAA,KAAAA,8BAAAA,KAAAA,MACAC,OAAAA,KAAAA,KAAAA,2BAAAA,KAAAA,UAGA,2BAEA,gBACA,oBAGA,4CACA,EACAC,aAAAA,GACA,6CACA,EACAC,QAAAA,KACA,2FACAC,YAAAA,GACA,wCACA,uBACA,EACAlB,SAAAA,CAAAA,GACA,gBACA,EACAmB,cAAAA,GAAA,gEACA,kBACAL,KAAAA,IAAAA,EAAAA,uBAAAA,GACAC,OAAAA,IAAAA,EAAAA,oBAAAA,KAEA,EAMAK,mBAAAA,GACA,wDACA,GACA,oBACAC,WAAAA,EACAC,SAAAA,CAAAC,QAAAA,KACA,WAEA,sCACAC,EAAAA,aAAAA,OAAAA,mBAGAC,OAAAA,QAAAA,aAAAA,CAAAA,EAAAA,SAAAA,MAAAA,EAAAA,WAAAA,GAGA,IC3IyP,I,WCQrPC,GAAY,OACd,EACA9C,EACAwB,GACA,EACA,KACA,KACA,MAIF,EAAesB,EAAiB,O","sources":["webpack://optinmonster-wordpress-plugin-vue-app/./src/pages/Campaigns.vue","webpack://optinmonster-wordpress-plugin-vue-app/src/pages/Campaigns.vue","webpack://optinmonster-wordpress-plugin-vue-app/./src/pages/Campaigns.vue?7478","webpack://optinmonster-wordpress-plugin-vue-app/./src/pages/Campaigns.vue?3ac5"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('core-page',{staticClass:\"omapi-campaign-table\"},[_c('h1',{staticClass:\"wp-heading-inline\"},[_vm._v(\"Campaigns\")]),_c('core-button',{staticClass:\"omapi-add-new\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.$modal.show('create-campaign-by-type')}}},[_vm._v(\"Add New\")]),_c('common-alerts',{attrs:{\"alerts\":_vm.alerts}}),_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[(!_vm.connected && !_vm.isLoading)?_c('campaigns-not-connected'):(_vm.showNoCampaigns)?_c('campaigns-no-campaigns'):_c('div',{staticStyle:{\"position\":\"relative\"}},[_c('campaigns-table-filters',{attrs:{\"is-bulk\":0 < _vm.bulk.length,\"action-key\":_vm.actionKey},on:{\"setAction\":_vm.setAction}}),_c('campaigns-table',{attrs:{\"campaigns\":_vm.campaignsToShow,\"is-bulk\":0 < _vm.bulk.length,\"action-key\":_vm.actionKey,\"is-refreshing\":_vm.isRefreshing || _vm.isLoading},on:{\"setAction\":_vm.setAction}}),(_vm.isLoading)?_c('core-loading',{staticStyle:{\"position\":\"absolute\",\"top\":\"128px\",\"opacity\":\"0.2\"}}):_vm._e()],1)],1),_c('campaigns-modal-create-by-type')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<core-page class=\"omapi-campaign-table\">\n\t\t<h1 class=\"wp-heading-inline\">Campaigns</h1>\n\t\t<core-button size=\"small\" class=\"omapi-add-new\" @click=\"$modal.show('create-campaign-by-type')\"\n\t\t\t>Add New</core-button\n\t\t>\n\t\t<common-alerts :alerts=\"alerts\" />\n\t\t<transition name=\"fade\" mode=\"out-in\">\n\t\t\t<campaigns-not-connected v-if=\"!connected && !isLoading\" />\n\t\t\t<campaigns-no-campaigns v-else-if=\"showNoCampaigns\" />\n\t\t\t<div v-else style=\"position: relative\">\n\t\t\t\t<campaigns-table-filters :is-bulk=\"0 < bulk.length\" :action-key=\"actionKey\" @setAction=\"setAction\" />\n\t\t\t\t<campaigns-table\n\t\t\t\t\t:campaigns=\"campaignsToShow\"\n\t\t\t\t\t:is-bulk=\"0 < bulk.length\"\n\t\t\t\t\t:action-key=\"actionKey\"\n\t\t\t\t\t:is-refreshing=\"isRefreshing || isLoading\"\n\t\t\t\t\t@setAction=\"setAction\"\n\t\t\t\t/>\n\t\t\t\t<core-loading v-if=\"isLoading\" style=\"position: absolute; top: 128px; opacity: 0.2\" />\n\t\t\t</div>\n\t\t</transition>\n\t\t<campaigns-modal-create-by-type />\n\t</core-page>\n</template>\n\n<script lang=\"js\">\nimport get from 'lodash/get'\nimport { mapState, mapActions, mapGetters } from 'vuex'\n\nexport default  {\n\t/**\n\t * Called when the route that renders this component is about to be\n\t * navigated away from.\n\t *\n\t * @since  2.0.0\n\t *\n\t * @param  {Object}   to   New route.\n\t * @param  {Object}   from Old route.\n\t * @param  {Function} next Tells Vue Router we can proceed.\n\t *\n\t * @returns {void}\n\t */\n\tbeforeRouteLeave (to, from, next) {\n\t\tif ('campaigns' !== get(to, 'meta.parent') && 'campaigns' !== get(to, 'name')) {\n\t\t\t// If going away from campaigns, need to reset the page/search vars.\n\t\t\tthis.updatePageVars()\n\t\t}\n\t\tnext()\n\t},\n\tinheritAttrs : false,\n\tdata () {\n\t\treturn {\n\t\t\tactionKey : 'none',\n\t\t}\n\t},\n\tcomputed : {\n\t\t...mapGetters([ 'connected', 'isFetched', 'shouldFetchUser' ]),\n\t\t...mapGetters('campaigns', [ 'campaignsWithSplits' ]),\n\t\t...mapState([ 'alerts' ]),\n\t\t...mapState('campaigns', [ 'bulk', 'page', 'search', 'totalCampaignsCount' ]),\n\t\tisLoading () {\n\t\t\treturn this.shouldFetchUser || this.$store.getters.isLoading('campaigns')\n\t\t},\n\t\tisRefreshing () {\n\t\t\treturn this.$store.getters.isLoading('campaigns-refresh')\n\t\t},\n\t\tcampaignsToShow () {\n\t\t\tif (this.connected) {\n\t\t\t\treturn this.campaignsWithSplits\n\t\t\t}\n\t\t\treturn []\n\t\t},\n\t\thasCampaigns () {\n\t\t\treturn 0 < this.totalCampaignsCount\n\t\t},\n\t\tshowNoCampaigns () {\n\t\t\treturn !this.hasCampaigns && !this.isLoading && this.isFetched('mainQuery')\n\t\t},\n\t},\n\twatch : {\n\t\t$route (to) {\n\t\t\tthis.updatePageVars(to)\n\n\t\t\tthis.refreshDashboard().catch(() => {})\n\t\t},\n\t},\n\tmounted () {\n\t\tthis.setPageVars({\n\t\t\tpage   : this.$get('$route.params.campaignsPage', this.page),\n\t\t\tsearch : this.$get('$route.params.searchTerm', this.search),\n\t\t})\n\n\t\tthis.processPublishQuery()\n\n\t\tif (!this.isLoading) {\n\t\t\tthis.initRequests()\n\t\t}\n\n\t\tthis.$bus.$on('fetchedMe', this.initRequests)\n\t},\n\tbeforeDestroy () {\n\t\tthis.$bus.$off('fetchedMe', this.initRequests)\n\t},\n\tmethods : {\n\t\t...mapActions('campaigns', [ 'saveWordPress', 'setPageVars', 'refreshDashboard', 'fetchRulesetData' ]),\n\t\tinitRequests () {\n\t\t\tthis.refreshDashboard().catch(() => {})\n\t\t\tthis.fetchRulesetData()\n\t\t},\n\t\tsetAction (key) {\n\t\t\tthis.actionKey = key\n\t\t},\n\t\tupdatePageVars (to = {}) {\n\t\t\tthis.setPageVars({\n\t\t\t\tpage   : get(to, 'params.campaignsPage', 1),\n\t\t\t\tsearch : get(to, 'params.searchTerm', ''),\n\t\t\t})\n\t\t},\n\t\t/**\n\t\t * Publish a campaign from the query param (if exists).\n\t\t *\n\t\t * @returns {void}\n\t\t */\n\t\tprocessPublishQuery () {\n\t\t\tconst campaignToPublish = this.$get('$route.params.publishCampaign', null)\n\t\t\tif (campaignToPublish) {\n\t\t\t\tthis.saveWordPress({\n\t\t\t\t\tcampaignId: campaignToPublish,\n\t\t\t\t\tsettings: { enabled: 1 },\n\t\t\t\t}).then(() => {\n\t\t\t\t\t// Remove 'publishCampaign' query parameter from the URL\n\t\t\t\t\tconst url = new URL(window.location.href);\n\t\t\t\t\turl.searchParams.delete('publishCampaign');\n\n\t\t\t\t\t// Update the browser's URL without reloading the page\n\t\t\t\t\twindow.history.replaceState({}, document.title, url.toString());\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t},\n};\n</script>\n\n<style lang=\"scss\">\n@import '../assets/scss/variables';\n@import '../assets/scss/pages/campaigns';\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Campaigns.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Campaigns.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Campaigns.vue?vue&type=template&id=3f77e6ad&\"\nimport script from \"./Campaigns.vue?vue&type=script&lang=js&\"\nexport * from \"./Campaigns.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Campaigns.vue?vue&type=style&index=0&id=3f77e6ad&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","on","$event","$modal","show","alerts","connected","isLoading","showNoCampaigns","staticStyle","bulk","length","actionKey","setAction","campaignsToShow","isRefreshing","_e","staticRenderFns","beforeRouteLeave","next","inheritAttrs","data","computed","hasCampaigns","watch","$route","mounted","page","search","beforeDestroy","methods","initRequests","updatePageVars","processPublishQuery","campaignId","settings","enabled","url","window","component"],"sourceRoot":""}