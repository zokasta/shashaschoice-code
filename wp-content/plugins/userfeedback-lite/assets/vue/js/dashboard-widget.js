(function(e){function t(t){for(var r,i,d=t[0],o=t[1],c=t[2],l=0,b=[];l<d.length;l++)i=d[l],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&b.push(n[i][0]),n[i]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);u&&u(t);while(b.length)b.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,d=1;d<a.length;d++){var o=a[d];0!==n[o]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={"dashboard-widget":0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var d=window["webpackJsonp"]=window["webpackJsonp"]||[],o=d.push.bind(d);d.push=t,d=d.slice();for(var c=0;c<d.length;c++)t(d[c]);var u=o;s.push([1,"chunk-vendors","chunk-common"]),a()})({1:function(e,t,a){e.exports=a("2d7b")},"2d7b":function(e,t,a){"use strict";a.r(t);var r=a("a026"),n=(a("41a0"),a("918d")),s=function(){var e=this,t=e._self._c;return e.widgetData?t("section",{staticClass:"userfeedback-dashboard-widget"},[t("section",{staticClass:"userfeedback-dashboard-widget__chart"},[t("h4",{staticClass:"userfeedback-dashboard-widget__title"},[e._v(e._s(e.texts.totalEntries))]),t("line-chart",{attrs:{"chart-data":e.chartData,options:e.chartOptions,height:150}})],1),t("section",{staticClass:"userfeedback-dashboard-widget__heading"},[t("div",{staticClass:"userfeedback-dashboard-widget__heading-start"},[t("h4",{staticClass:"userfeedback-dashboard-widget__title"},[e._v(e._s(e.texts.totalEntriesBySurvey))])]),t("div",{staticClass:"userfeedback-dashboard-widget__heading-end"},[t("div",{staticClass:"select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.currentRangeId,expression:"currentRangeId"}],attrs:{name:"dashboard-range",id:"dashboard-range"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.currentRangeId=t.target.multiple?a:a[0]}}},e._l(e.availableRanges,(function(a){return t("option",{key:a.value,domProps:{value:a.value}},[e._v(e._s(a.label))])})),0)])])]),t("user-feedback-dashboard-widget-surveys",{attrs:{surveys:e.widgetData.surveys}})],1):e._e()},i=[],d=(a("14d9"),a("561c")),o=a("2abc"),c=a("9ea0"),u=a("33e7"),l=function(){var e=this,t=e._self._c;return t("section",{staticClass:"userfeedback-dashboard-widget-surveys"},[t("section",{staticClass:"userfeedback-dashboard-widget-surveys__list"},e._l(e.displayedSurveys,(function(a){return t("article",{key:a.id,staticClass:"userfeedback-dashboard-widget-survey-item"},[t("h6",{staticClass:"userfeedback-dashboard-widget-survey-item__title"},[e._v(e._s(a.title))]),t("div",{staticClass:"userfeedback-dashboard-widget-survey-item__info"},[t("a",{attrs:{href:e.getSurveyResultsLink(a.id)}},[e._v(e._s(a.range_responses_count))]),t("span",{directives:[{name:"icon",rawName:"v-icon:graph-lines",arg:"graph-lines"}]})])])})),0),t("div",{staticClass:"userfeedback-recommended-plugin"},[e.recommendedPluginNotInstalled?t("span",{domProps:{innerHTML:e._s(e.texts.recommendedPluginToInstall)}}):e._e(),e.recommendedPluginNotActivated?t("span",{domProps:{innerHTML:e._s(e.texts.recommendedPluginToActivate)}}):e._e()])])},b=[],g=a("a878"),h={name:"UserFeedbackDashboardWidgetSurveys",props:{surveys:{type:Array,required:!0}},computed:{displayedSurveys(){const e=[...this.surveys];return e.slice(0,5)},recommendedPluginNotInstalled(){return!window.userfeedback.recommended_plugin_is_installed},recommendedPluginNotActivated(){return window.userfeedback.recommended_plugin_is_installed&&!window.userfeedback.recommended_plugin_is_activated},texts(){return{recommendedPluginToInstall:Object(d["d"])(Object(d["a"])('Recommended Plugin: <b>%1$s</b> - <a href="%2$s">Install</a> <a href="%3$s" target="_blank" rel="noopener noreferrer">Learn More</a>',this.$textDomain),"Duplicator",window.userfeedback.recommended_plugin_install_url,window.userfeedback.recommended_plugin_learn_more_url),recommendedPluginToActivate:Object(d["d"])(Object(d["a"])('Recommended Plugin: <b>%1$s</b> - <a href="%2$s">Active</a> <a href="%3$s" target="_blank" rel="noopener noreferrer">Learn More</a>',this.$textDomain),"Duplicator",window.userfeedback.recommended_plugin_activate_url,window.userfeedback.recommended_plugin_learn_more_url)}}},methods:{getSurveyResultsLink(e){return Object(g["a"])("results","survey/"+e)}}},p=h,f=a("2877"),m=Object(f["a"])(p,l,b,!1,null,null,null),_=m.exports,v={name:"UserFeedbackDashboardWidget",components:{LineChart:u["a"],UserFeedbackDashboardWidgetSurveys:_},data(){return{currentRangeId:"",isLoading:!1,widgetData:null}},computed:{texts(){return{totalEntries:Object(d["a"])("Total Entries",this.$textDomain),totalEntriesBySurvey:Object(d["a"])("Total Entries by Survey",this.$textDomain),responses:Object(d["a"])("Responses",this.$textDomain)}},availableRanges(){const e=new Date,t=new Date;t.setDate(e.getDate()-7);const a=new Date;a.setDate(e.getDate()-30);const r=[{startDate:Object(o["a"])(t),endDate:Object(o["a"])(e),label:Object(d["a"])("Last 7 Days",this.$textDomain),value:"7-days"}];return this.$uf.is_pro&&this.$uf.is_licensed&&r.push({startDate:Object(o["a"])(a),endDate:Object(o["a"])(e),label:Object(d["a"])("Last 30 Days",this.$textDomain),value:"30-days"}),r},currentRange(){const e=this.availableRanges.find(e=>e.value===this.currentRangeId);if(e){const{startDate:t,endDate:a}=e;return{start_date:t,end_date:a}}return null},chartData(){const e=this.widgetData.data_points,t=[],a=[];for(const r of e){const{count:e,date:n}=r,s=new Date(n),i=s.toLocaleString("default",{month:"short"}),d=i+" "+s.getDate();t.push(e),a.push(d)}return{datasets:[{data:t}],labels:a}},chartOptions(){return{scales:{y:{beginAtZero:!0,ticks:{stepSize:10}}},plugins:{tooltip:{callbacks:{title:e=>{const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=e[0].dataIndex,r=this.widgetData.data_points,n=new Date(r[a].date),s=n.getDate()+" "+t[n.getMonth()]+" "+n.getFullYear();return this.$getLocalizedDate(s)},label:function(e){let t=e.dataset.label||e.parsed.y;return t=Object(d["d"])(Object(d["b"])("%s Response","%s Responses",Number.parseInt(t),this.$textDomain),t),t}}}}}}},methods:{async fetchData(){const e={...this.currentRange};this.widgetData=await Object(c["c"])(e)}},beforeMount(){this.currentRangeId=this.availableRanges[0].value},watch:{currentRangeId(){this.fetchData()}}},y=v,w=Object(f["a"])(y,s,i,!1,null,null,null),D=w.exports;(()=>{const e=document.getElementById("userfeedback-dashboard-widget");e&&(r["a"].use(n["a"]),new r["a"]({render:e=>e(D)}).$mount(e))})()},"41a0":function(e,t,a){}});