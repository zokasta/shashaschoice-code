!function(e){var o={};function a(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=o,a.d=function(e,o,t){a.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,o){if(1&o&&(e=a(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var r in e)a.d(t,r,function(o){return e[o]}.bind(null,r));return t},a.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(o,"a",o),o},a.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},a.p="",a(a.s=20)}({20:function(e,o){jQuery(document).ready((function(e){var o=e("#order-placed-active-status"),a=e("#order-placed-inactive-status");facebook_for_woocommerce_whatsapp_events.order_placed_enabled?(a.hide(),o.show()):(o.hide(),a.show());var t=e("#order-fulfilled-active-status"),r=e("#order-fulfilled-inactive-status");facebook_for_woocommerce_whatsapp_events.order_fulfilled_enabled?(r.hide(),t.show()):(t.hide(),r.show());var n=e("#order-refunded-active-status"),c=e("#order-refunded-inactive-status");facebook_for_woocommerce_whatsapp_events.order_refunded_enabled?(c.hide(),n.show()):(n.hide(),c.show());var s=e("#woocommerce-whatsapp-save-order-confirmation"),_=e("#woocommerce-whatsapp-cancel-order-confirmation");e("#woocommerce-whatsapp-manage-order-placed, #woocommerce-whatsapp-manage-order-fulfilled, #woocommerce-whatsapp-manage-order-refunded").click((function(o){var a=e(o.target).attr("id").replace("woocommerce-whatsapp-","");a=a.replaceAll("-","_");var t=new URL(window.location.href),r=new URLSearchParams(t.search);r.set("view",a),t.search=r.toString(),window.location.href=t.toString()})),e("#library-template-content").load(facebook_for_woocommerce_whatsapp_events.ajax_url,(function(){e.post(facebook_for_woocommerce_whatsapp_events.ajax_url,{action:"wc_facebook_whatsapp_fetch_library_template_info",nonce:facebook_for_woocommerce_whatsapp_events.nonce,event:facebook_for_woocommerce_whatsapp_events.event},(function(o){if(o.success){var a=facebook_for_woocommerce_whatsapp_events.event,t={ORDER_REFUNDED:{"{{1}}":"{{$amount}}"}},r={ORDER_PLACED:{"{{1}}":"{{first_name}}","{{2}}":"#{{order_number}}"},ORDER_FULFILLED:{"{{1}}":"{{first_name}}","{{2}}":"#{{order_number}}"},ORDER_REFUNDED:{"{{1}}":"{{first_name}}","{{2}}":"{{$amount}}","{{3}}":"#{{order_number}}"}},n=JSON.parse(o.data).data[0],c=e.parseHTML(n.header)[0].textContent;c=c.replace(/{{\d+}}/g,(function(e){return t[a][e]}));var s=e.parseHTML(n.body)[0].textContent;if(s=(s=s.replace(/{{\d+}}/g,(function(e){return r[a][e]}))).replace(/\n/g,"<br>"),"ORDER_REFUNDED"===facebook_for_woocommerce_whatsapp_events.event)e("#library-template-content").html("\n                        <h3>Header</h3>\n                        <p>".concat(c,"</p>\n                        <h3>Body</h3>\n                        <p>").concat(s,"</p>\n                    ")).show();else{var _=e.parseHTML(n.buttons[0].text)[0].textContent;e("#library-template-content").html("\n                    <h3>Header</h3>\n                    <p>".concat(c,"</p>\n                    <h3>Body</h3>\n                    <p>").concat(s,"</p>\n                    <h3>Call to action</h3>\n                    <p>").concat(_,"</p>\n                ")).show()}console.log("Whatsapp Library Template call succeeded",o)}else{console.log("Whatsapp Library Template call failed",o);var p=facebook_for_woocommerce_whatsapp_finish.i18n.generic_error,l='\n                <div class="notice-error">\n                  <p>'.concat(p,"</p>\n                </div>\n              ");e("#events-error-notice").html(l).show()}}))})),s.click((function(o){var a=e("#manage-event-language").val(),t=e('input[name="template-status"]:checked').val(),r=e("#woocommerce-whatsapp-save-loading-state");s.addClass("fbwa-button-disabled"),_.addClass("fbwa-button-disabled"),r.show(),e.post(facebook_for_woocommerce_whatsapp_events.ajax_url,{action:"wc_facebook_whatsapp_upsert_event_config",nonce:facebook_for_woocommerce_whatsapp_events.nonce,event:facebook_for_woocommerce_whatsapp_events.event,language:a,status:t},(function(o){if(o.success){var a=new URL(window.location.href),t=new URLSearchParams(a.search);t.set("view","utility_settings"),a.search=t.toString(),window.location.href=a.toString(),console.log("Whatsapp Event Config has been updated",o)}else{r.hide(),s.removeClass("fbwa-button-disabled"),_.removeClass("fbwa-button-disabled"),console.log("Whatsapp Event Config Update failure",o);var n=facebook_for_woocommerce_whatsapp_finish.i18n.generic_error,c='\n                <div class="notice-error">\n                  <p>'.concat(n,"</p>\n                </div>\n              ");e("#events-error-notice").html(c).show()}}))})),e("#manage-event-language").load(facebook_for_woocommerce_whatsapp_events.ajax_url,(function(){e.post(facebook_for_woocommerce_whatsapp_events.ajax_url,{action:"wc_facebook_whatsapp_fetch_supported_languages",nonce:facebook_for_woocommerce_whatsapp_events.nonce},(function(o){if(o.success){var a=JSON.parse(o.data).supported_languages;e.each(a,(function(o,a){var t=e.parseHTML(a.display_value)[0].textContent,r=e.parseHTML(a.locale)[0].textContent;e("#manage-event-language").append(e("<option></option>").text(t).val(r))}));var t=function(e){switch(facebook_for_woocommerce_whatsapp_events.event){case"ORDER_PLACED":return facebook_for_woocommerce_whatsapp_events.order_placed_language;case"ORDER_FULFILLED":return facebook_for_woocommerce_whatsapp_events.order_fulfilled_language;case"ORDER_REFUNDED":return facebook_for_woocommerce_whatsapp_events.order_refunded_language;default:return null}}();e("#manage-event-language").val(t),console.log("Fetch supported language call succeeded")}else{var r=190===JSON.parse(o.data.body).error.code?facebook_for_woocommerce_whatsapp_events.i18n.token_invalidated_error:facebook_for_woocommerce_whatsapp_finish.i18n.generic_error,n='\n                <div class="notice-error">\n                  <p>'.concat(r,"</p>\n                </div>\n              ");e("#events-error-notice").html(n).show()}}))}))}))}});